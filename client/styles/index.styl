/* @charset="UTF-8"; */

@import "variables.styl"
@import "growl.notifications.styl"
@import "mixins.styl"
@import "responsive.styl"
@import "locale_en_US.styl"
@import "locale_ru_RU.styl"

vertical-gradient(topColor, bottomColor)
  background topColor
  background -webkit-linear-gradient(topColor, bottomColor)
  background -o-linear-gradient(topColor, bottomColor)
  background -moz-linear-gradient(topColor, bottomColor)
  background linear-gradient(topColor, bottomColor)

@import "normalize.styl"

body
  background-color $lightColor
  color $blueDark
  font-family -apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"
  box-sizing border-box

a
  color $blueRegular

button,input,textarea
  font-family inherit
  font-size inherit
  box-sizing border-box
  margin-right 0

button,input[type=submit],input[type=reset]
  background-color $blueRegular
  border solid 1px $blueRegular
  color white
  padding 0.25em 1em
  text-align center
  text-decoration none
  overflow hidden
  text-overflow ellipsis
  margin 0.1em
  white-space nowrap
  box-shadow 1px 1px 1px -1px rgba(255,255,255,0.2) inset

button:active,input[type=submit]:active,input[type=reset]:active
  box-shadow 1px 1px 1px -1px rgba(0,0,0,0.2) inset

button[disabled],input[type=submit][disabled],input[type=reset][disabled]
  background-color desaturate($blueRegular, 20)

input[type=text],
input[type=password],
input[type=email],
input[type=tel],
input[type=number],
textarea
  border solid 1px $blueRegular
  padding 0.3em 0.5em
  margin 0.1em

.flex
  display flex

.flex-column 
  display flex
  flex-direction column


.flex-row 
  display flex
  flex-direction row

.container 
  height 100vh

.flex-column 
  display flex
  flex-direction column

.flex-row
  display flex
  flex-direction row

.flex-center
  justify-content center

.header  
  height calc(3em + 1vh)
  background-color lighten($blueDark, 5)


.body  
  height calc(99vh - 3em )

body > .container  .body
  opacity 0.1
  transition opacity $fastAnimationDuration linear
  cursor wait
  z-index 1

body > .container > .connecting
  position fixed
  left 0
  top 0
  width 100vw
  height 100vh
  display flex
  align-content center
  justify-content center
  z-index 5
  background-color alpha($blueDark, 0.9)
  div.center
    justify-content center
    color $darkGrey
    font-size 2vh
    h1
      color $orange
      font-size 10vh
      margin 1vh 0
    .text-right
      text-align right
    small
      color $greenDark

body > .container.websocketAlive .body
  opacity 1
  cursor default

.logo 
  width $categoriesPanelWidth
  height calc(3em + 1vh)
  line-height calc(3em + 1vh)

  text-align center
  vertical-align middle
  text-overflow ellipsis
  overflow hidden

.logo a 
  text-decoration none
  color $orange
  span
    font-feature-settings "liga"
    font-variant-ligatures common-ligatures
    font-kerning normal

.categories
  width $categoriesPanelWidth
  background-color $blueDark
  vertical-gradient(rgb(34, 46, 59), rgb(46, 63, 82))

  overflow hidden
  text-overflow ellipsis

  .total-online
    position absolute
    width $categoriesPanelWidth
    left 0
    bottom calc(4em + 1vh)
    color alpha($greenDark, 50%)
    a
      color alpha($greenDark, 50%)
      text-decoration-color alpha($greenDark, 10%)
      font-size 0.6em

.categories > .menu
  height calc(98vh - 6em)

  .menu
    margin 0
    padding 0




.categories > .settings
  height calc(3em + 1vh)
  border-top solid 1px rgba(255, 255, 255, 0.024)
  line-height calc(3em + 1vh)
  vertical-align middle
  text-align center
  color $darkGrey
  transition all $slowAnimationDuration ease
  &.ng-hide
    line-height 0
    opacity 0
  a
    color $darkGrey
    text-decoration none

.categories

  ul.menu
    text-overflow ellipsis
    li
      margin 0
      padding-top 1vh
      user-select none

      a
        transition all ease $slowAnimationDuration
        display block
        min-height calc(1em + 1vh)
        color rgb(143,161,180)
        text-decoration none
        line-height calc(1em + 3vh)
        padding-left 2vw
        font-size calc(0.8em + 1vh * 0.25)
        border-left solid 0.0vw transparent
        text-overflow ellipsis
        overflow hidden
        &:hover
          color lighten(#578FCC, 20)


    li.active
      a
        color lighten(#578FCC, 30)
        border-left solid 0.5vw #578FCC
        padding-left 1.5vw
        background-color rgba(0,0,0,0.1)


.button,
input[type="submit"],
input[type="reset"]
  background-color $blueRegular
  color white
  padding 1vh 1vw
  text-align center
  text-decoration none



.button,
.topic-info,
.show-old-comments,
input[type="submit"],
input[type="reset"]
  -webkit-user-select: none;  /* Chrome all / Safari all */
  -moz-user-select: none;     /* Firefox all */
  -ms-user-select: none;      /* IE 10+ */
  user-select none

.menu
  .button
    display block
    opacity 0.8
    margin 0
    text-overflow ellipsis
    overflow hidden
    white-space nowrap

.view-panel 
  width $topicPanelWidth
  background #F7FAFC

.topics-panel
  width: $topicsPanelWidth
  background-color lighten($blueDark, 70)
  vertical-gradient($categoriesTopColor, $categoriesBottomColor)
  padding-top 0vh
  overflow hidden
  > .search-box
    height 1.2em
    padding 1vh 0.5vw
    overflow hidden
    border-bottom solid 1px rgba(255,255,255,0.025)
    box-shadow: 0 3px 5px -5px #000000;
    margin-top -1px
    input.search
      width  calc(100% - 2em)
      background-color transparent
      border none
      color $darkGrey
    a
      color darken($darkGrey, 50%)

    a+input.search:focus
      color $lightGrey



  > .topics
    height calc(96vh - 7.2em)
    overflow-y auto
    border-left solid 1px rgba(255,255,255,0.025)
    margin-right 3px
    position relative



  > .topics-switch
      height calc(3em + 1vh)
      background-color rgb(63,	79,	99)
      line-height calc(3em + 1vh)
      vertical-align middle
      text-align center
      color $darkGrey
      box-shadow 0 0 5px -2px #000000
      transition all $slowAnimationDuration
      opacity 1
      &.ng-hide
        line-height 0
        opacity 0

      a
        padding 0 ($topicsPanelWidth/16)
        color $darkGrey
        height calc(3em + 1vh - 2px)
        display inline-block
      a.active
        color white
        border-bottom solid 2px $blueRegular
        &::before
          content ''
          box-shadow 1px 1px 1px #fff

  .topic-info
    width $topicsPanelWidth
    display: block
    .fa-lock
      color $greenLight
      font-size 0.8em
  .topic-status
    width 2vw
    text-align center
    display flex
    flex-direction row
    justify-content center
    vertical-align middle
    align-items center
    .counter
      font-size 0.75em
      line-height 1em
      display block
      width 1em
      height 1em
      border-radius .5em
      color $greenDark
      background-color $blueDark
      justify-content center

  .topic

    margin 0
    padding 0
    border-bottom solid 1px rgba(255,255,255,0.025)
    font-size 1em
    border-left solid 1px rgba(255,255,255,0)
    /**/


    a
      display block
      padding 1vh 1vw
      padding-left 0
      min-height 1em
      color lighten($blueDark, 50)
      word-break keep-all
      hyphens auto
      line-break auto
      overflow hidden
      text-overflow ellipsis

    &.active
      background rgb(48, 64, 80)
      position relative
      border-left solid 1px rgba(255,255,255,0.25)
      a
        color white

    a
      text-decoration none

    small
      color darken($blueDark, 10)
      &.tag
        color lighten($blueDark, 50)

    &.ng-animate
        transition:all
        animation-iteration-count 1
        animation-duration $slowAnimationDuration
    &.ng-enter
        animation-name fadeInQuick
        animation-timing-function ease-out
    &.ng-leave
        animation-name fadeOutQuick
        animation-timing-function ease-in


  /*

  .animate-repeat.ng-move,
.animate-repeat.ng-enter,
.animate-repeat.ng-leave {
  transition:all linear 0.5s;
}

.animate-repeat.ng-leave.ng-leave-active,
.animate-repeat.ng-move,
.animate-repeat.ng-enter {
  opacity:0;
  max-height:0;
}

.animate-repeat.ng-leave,
.animate-repeat.ng-move.ng-move-active,
.animate-repeat.ng-enter.ng-enter-active {
  opacity:1;
  max-height:30px;
}

  */

.topic-panel
  width $topicPanelWidth

@keyframes fadeInQuick 
  0% 
    height 0
    opacity  0
  20%
    height calc(0.5em + 1vh + 1px)

  50%
    opacity 0.05

  100%
    height calc(1em + 2vh + 2px)
    opacity 1

@keyframes fadeOutQuick
  0%
    height calc(1em + 2vh + 2px)
    opacity 1
  100%
    height 0
    opacity 0

@keyframes flyTopRightAndDisappear
  0%
    opacity 1
    transform translate(0, 0)
  59%
    opacity 0
    transform translate(2em, -2em)
  60%
    opacity 0
    transform translate(-2em, 2em) scale(0)
  100%
    opacity 1
    transform translate(0, 0) scale(1)


.topic-info

  p
    color darken($blueDark, 10)

.topic-info h1
  margin-top 0

.top-bar
  font-size 1em

  .slogan
    display block
    width 65vw
    line-height calc(3em + 1vh)
    color $greenDark


  .user
    margin-top 0vh
    width 20vw
    color $lightGrey
    img.avatar
      height 2.5em
    .name
      white-space nowrap
      text-overflow ellipsis

  .button
    display block
    padding-top 1vh
    padding-bottom 1vh
    padding-left 1vw
    padding-right 1vw
    background-color $blueRegular
    color #fff
    text-decoration none
    cursor pointer

.loggedIn .view-panel .topic-view .topic
  height: calc(98vh - 6em);

.view-panel
  .wrapper
    margin 1vh 1vw
    #topic
      position relative
      height: calc(99vh - 4em);


  &.ng-leave
    opacity 0
    width 0
    overflow hidden

  .topic-view
    width 100%

    > .topic
      height: calc(98vh - 3em);
      overflow-y auto
      transition height ease $slowAnimationDuration
      position: relative


      .details
        padding-top 1px
        padding-bottom 1px
        background-color lighten($blueDark, 70)
        .topic-body
          line-height 1.618
          white-space: pre-line
          text-rendering optimizeLegibility
          -webkit-font-smoothing antialiased
          img, video
            max-width 50vw
            max-height 90vh
        .topic-authoring
          margin-top 1em
          margin-bottom 1em
          padding: 0.5vh
          padding-left: 0
          padding-top: 1em
          line-height 3vh
          border-top solid 1px lighten($blueDark, 60)
          font-size: 0.8em;
          img
            height 3vh
            margin-left 0
            vertical-align middle
            border none

          .col
            margin-right 0.5vh
            line-height 3vh
            a
              text-decoration none
              font-weight 600
            .date
              i.fa-pencil
                color $lightGrey

          .col.author
            margin-right 0
            width 4vh

            img
                float left
          .col.private
            height 2.5vh
            color $greenLight
            padding 0.2vh 0.5vh
            border-radius 2vh
            line-height 2vh
            font-size 1vh
            img
              height 2vh
              width 2vh
              border-radius 1vh
              margin-left -1vh
              border solid 0.1vh $lightColor
            .padlock + a > img
              margin-left -0.5vh
            div.padlock
              text-align center
              height 2vh
              width 2vh
              border-radius 1vh
              border solid 0.1vh  $lightColor
              display inline-block

        pre
          overflow auto
    > .compose
      height: calc(3em + 1vh);
      line-height: calc(3em + 1vh)
      background-color white
      box-shadow 0 0 5px -2px #000000
      overflow hidden
      width $topicPanelWidth
      transition height ease 300ms
      position: relative;

      button
        border dotted 1px transparent
        background-color white
        -webkit-appearance none
        cursor pointer
        width $topicPanelWidth * 0.065
        height calc(3em + 1vh)
        text-align center
        color $lightGrey
      .controls
        width calc(4vh + 1vw)
        text-align center
        min-width 1.5em
        button
          color $lightGrey
          border solid 2px $lightGrey
          width 1.5em
          height 1.5em
          border-radius 1em
          text-align center
          padding 0
      .send
        width 3vw
        min-width 1em
        text-align center
        border-left solid 0 $lightGrey
        button
          width 100%
          padding 0.25em 0
          color $blueRegular
          font-size 1em
          text-align center
          transition:all
          animation-iteration-count 1
          animation-duration 200ms
          transform translate(0, 0) scale(1)

        button.sending
          animation-name flyTopRightAndDisappear
          animation-timing-function ease-out



      button[disabled]
          color $lightGrey
      .text
        width calc(100% - 5vh - 5vw)

        textarea
          transition height ease $slowAnimationDuration
          width $topicPanelWidth * 0.85
          outline hidden
          font-size inherit
          height 2em
          border none
          padding 0
          line-height  1em
          margin-top 1em
          resize none
          outline 0
        .progress
          height 0.5vh
          .bar
            width 0
            margin-top 0.1vh
            background-color $greenDark
            height 0.25vh
            transition width ease $slowAnimationDuration

        .toolbar
          margin 0
          padding 0
          line-height: calc(3em - 0.5vh);
          .button
            padding 0.1vh 0.25vw
            margin 0 0
            color $normalGrey
            background-color transparent
            &:hover
              color $darkGrey
          :first-child
            margin-left 0
            padding-left 0

    .details,.comments
      padding-left 1vw
      padding-right 1vw


      h1
        margin-top 1vh
        padding-top 0

    .comments
      @import "typists.styl"
      .pagination
        margin-top 1vh
        text-align center
        .show-old-comments
          background-color transparent
          color $normalGrey
          border solid 1px $lightGrey
          border-radius 3px
          font-size 0.8em
          padding 0.5vh 1vw
          text-align center
          margin-left auto
          margin-right auto
          white-space nowrap
          overflow hidden
          text-overflow ellipsis
          display inline-block
          max-width 40vw
          cursor pointer
          &:hover
            color darken($normalGrey, 10)
            border solid 1px $normalGrey
            box-shadow 1px 1px 0px white inset
          &:active
            box-shadow 1px 1px 1px rgba(0,0,0,0.1) inset
          &:focus
            color darken($normalGrey, 10)
            box-shadow 1px 1px 0px white inset

      .comment
        margin-bottom 0vh
        margin-top 1vh
        padding 1vh 1vh 1vh 0vh

        .date
          float right
          width 3vw
          font-weight 100
          text-align right
          color lighten($blueDark, 50)
          overflow hidden
          .time
            font-size 0.6em
            text-decoration none
            color alpha($blueDark, 0.2)
            transition color ease $fastAnimationDuration

        &:hover
          background-color rgba(0,0,0,0.01)

          .date
            .time
              color alpha($blueDark, 50)
        .avatar
          width 4vh
          padding 0

          img
            background-color $lightGrey
            height 3vh
            max-width 4vh

        .comment-details
          position relative
          width calc(100% - 4vh - 3vw)
          .author
            font-size 0.8em
            margin-bottom 1vh
            a
              color $blueRegular
              text-decoration none
              font-weight 600
          .text
            white-space pre-wrap
            color $blueDark
            line-height 1.618
            text-rendering optimizeLegibility
            -webkit-font-smoothing antialiased
            img, video
              max-width 50vw
              max-height 80vh
              box-shadow 0 0 1vw -0.5vw $blueDark
              display block
              margin 0.1vh auto
              &.alpha
                box-shadow none
            video
              background-color $darkGrey
            blockquote
              background-color floralwhite
              border-left: 5px solid #faf0e6
              padding 0 0.5vw
          .text-feedback
            border solid 1px $lightGrey
            border-radius 3px
            background-color white
            display block
            opacity 0
            position absolute
            right 0
            top -1vh
            font-size 0.8em
            line-height 0.8em
            a
              display inline-block
              padding 2px 3px
              line-height inherit
              cursor pointer
              &:hover
                color $blueDark
            span
              line-height inherit
              color $greenDark
            .fa
              line-height inherit
              opacity 0.5
            .fa-flag
              float right
          .text-moderation
            border-bottom solid 0 $lightGrey
            display none
            .button
              padding 2px
              font-size 0.8em
              &.spam
                background-color red
        &:hover
            .text-feedback
              opacity 1
        &.me
          .text
            color lighten($blueDark, 20)
        &.spam
          .text
            opacity 0.1
        &.lp
          margin-top 0
          margin-bottom 0
          padding-top 0.5vh
          padding-bottom 0.5vh
        &.up + .comment.lp
          margin-top -1vh


    &.advancedcompose
      > .topic
        height calc(70vh - 6em)
      > .compose
        height calc(3em + 29vh)
        .text
          textarea
            height calc(-0.5em + 29vh)
            margin-top 0

  .ask-form
    width 100%
    h1
      margin 1vmin
    .label
      display block
      width 10vw
      margin 1vmin
      padding 2px 3px

    select,textarea,input[type="text"],button
      box-sizing border-box
      -webkit-appearance none
      -moz-appearance none
      font-size 1em
      margin-bottom  1vh
      padding 1vh 1vw
      font-family inherit
      border-radius 3px
    select,input[type="text"],textarea
      width 99%
      border solid 1px $normalGrey
      color $blueDark
      background-color ligten($lightColor, 10)
      padding 1vh 1vw
      margin 0.5vh 0.5vw

    button
      background-color $blueRegular
      color $lightColor
      border solid 1px $blueRegular

    button[disabled]
      background-color desaturate($blueRegular, 10%)

    .private
      background rgba(0,0,0,0.1)
      padding 1vh 1vw
      width 90%
      margin 0
      .acl-list
        flex-grow 1
      input[type="email"], button, .button
        padding 0.1vh 0.1vw
        margin 0

    form
      input + i.fa,
      input + i + i.fa,
      select + i.fa,
      select + i + i.fa,
      textarea + i.fa,
      textarea + i + i.fa
        line-height: calc(1.5em + 2.5vh);
        position absolute
        margin-left 0
        opacity 0.25
        right 1vw

      .ng-touched + .fa
        opacity 1

      i.fa-times
        color red
      i.fa-check
        color $greenDark
.topic-view.private > .topic
  .details
    background-color alpha($greenLight, 5%)


.preview
    overflow auto
    padding 1vmin
    margin 1vmin
    background rgba(250,250,250,0.1)
    border dashed 1px rgba(0,0,0,0.1)
    height 35vh
    width  auto

  .user-info
    width 100%
    h1
      text-align center
    div
      text-align center
  .user-topics
    margin-left 1vw
    .topic
      margin-left 1vw

  h1
    margin-left 0
    font-weight 200
    @media (max-width $screen-xs-max)
      font-size 1.2em

  h2
    @media (max-width $screen-xs-max)
      font-size 1.2em


    pre, code
      font-size 1em

  .join
    .welcoming
      color $greenDark
      text-shadow 0px 1px 1px white
      font-size 1.5em
      text-align center
      font-style italic
      padding 1em

pre,code,.mono
  font-family Consolas,monaco,monospace
  tab-size: 4;
  -moz-tab-size: 4;
  -webkit-tab-size: 4;
  -o-tab-size: 4;

.signinform
  padding 1vh 2vw
  background-color lighten($blueDark, 70)
  label
    display inline-block
    min-width 5em
    width 5vw
  input, textarea
    font-family inherit
    font-size inherit
  .message
    padding 0.5em
    color $orange
    background-color white

import('user.styl')
import('googlecode.styl')

.text-center
  text-align center

.text-left
  text-align left

.text-right
  text-align right

.help-block
  background-color lighten($orange, 20)
  border solid 1px $lightGrey
  margin-top 0
  padding 1vh
  font-size 0.8em

bookmark
  display inline-block
  .bookmark-this-topic
    font-size 100

.online
  color $greenBright
  font-size 0.6em
  vertical-align: middle;

.rank
  color lighten($greenDark, 50)
  .ranked
    color $greenDark
  .fa-fw
    width 0.5vh

.avatar .rank
  font-size 0.5vh

.color-secure
  color $greenLight

body > .upload-container
  position fixed
  left 0
  top 0
  width 100vw
  height 100vh
  display none
  align-content center
  justify-content center
  z-index 5
  background-color alpha($blueLight, 0.5)
  div.center
    justify-content center
    color white
    font-size 2em

body.upload-accept > .upload-container
  display flex


@import "settings.styl"
